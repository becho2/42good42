<!doctype html>
<html lang="ko">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">

    <!-- <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> -->
    <!-- 모바일에서 좌우로 스크롤이 생기는 현상을 막기 위해 추가한 meta태그, 기존과 겹쳐서 기존 건 주석처리 - 진회 -->
    <!-- 출처: https://yongddugi.tistory.com/6-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>

    <title>분리수거 테스트</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Gaegu&display=swap" rel="stylesheet">

    <style>

        body {
            width: 100%;
            background-color: #fff9e2;
        }

        * {
            font-family: 'Gaegu', cursive;
        }

        .wrap {
            width: 600px;
            height: 950px;
            margin: auto;
            text-align: center;
            {#background-color: #fff4c8;#}
        }

        .item-img {
            width: 100%;
            height: 400px;

            background-image: url("../static/img_2/quiz_pc.png");
            background-position: center;
            background-size: cover;
        }

        .item-desc {
            width: 600px;
            margin-top: 10px;
            margin-bottom: 20px;
        }

        .item-desc > h1 {
            font-weight: bold;
            font-size: 50px;

        }

        .item-desc>p {
            font-size: 50px;
        }

        .item-desc .category {
            font-weight: bold;
            font-size: 20px;
            color: grey;
            border: 2px solid grey;
            border-radius: 5px;
            padding: 5px;
            background-color: #fff;
        }

        .item-btn {
            width: 600px;
        }

        .btn-order {
            margin: auto;
            width: 250px;
            height: 250px;
            display: inline;
            font-size: 200px;
            text-align: center;
        }


        .btn-order>span {
            width: 225px;
            height: 100px;
            line-height: 100px;
            display: block;
            text-align: center;
        }

        .btn-primary {
            background-color: cornflowerblue;
        }

        .btn-primary:hover,
        .btn-primary:focus {
            border-color: #6fb03a;
            background-color: #444;
            color: #FFF;
        }

        .btn-danger {
            background-color: #ff4648;
        }

        .btn-danger:hover,
        .btn-danger:focus {
            border-color: #6fb03a;
            background-color: #444;
            color: #FFF;
        }



        /*#answer-check {*/
        /*    display: none;*/
        /*    width: 300px;*/
        /*    padding: 20px 60px;*/
        /*    background-color: #fefefe;*/
        /*    border: 1px solid #888;*/
        /*    border-radius: 3px;*/
        /*}*/

        /*#answer-check .btn-next {*/
        /*    position: absolute;*/
        /*    top: 10px;*/
        /*    right: 10px;*/
        /*}*/

        /* 모달창 CSS 시작 */
        /* 출처: http://yoonbumtae.com/?p=3632 */
        #modal.modal-overlay {
            display: none;
            width: 100%;
            height: 100%;
            position: absolute;
            left: 0;
            top: 0;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.25);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            backdrop-filter: blur(1.5px);
            -webkit-backdrop-filter: blur(1.5px);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.18);
        }

        #modal .modal-window {
            background: rgba(69, 139, 197, 0.70);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            backdrop-filter: blur(13.5px);
            -webkit-backdrop-filter: blur(13.5px);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.18);
            width: 500px;
            height: 700px;
            position: relative;
            top: 0px;
            padding: 10px;
            text-align: center;
        }

        #modal .title {
            padding-left: 10px;
            display: inline;
            text-shadow: 1px 1px 2px gray;
            color: white;
        }

        #modal .title h2 {
            display: inline;
            font-size: 60px;
        }

        #description {
            font-size: 30px;
        }

        /* #modal .close-area {
            display: inline;
            float: right;
            padding-right: 10px;
            cursor: pointer;
            text-shadow: 1px 1px 2px gray;
            color: white;
        } */

        #modal .content {
            margin-top: 20px;
            padding: 10px;
            text-shadow: 1px 1px 2px gray;
            color: white;
        }

        .modal-window .btn {
            margin-top: 20px;
        }

        /* 모달창 CSS 끝 */

        /* 미디어 쿼리 - 모바일 환경 시작*/
        @media (max-width: 480px) {


            .wrap {
                width: 100%;
                height: 700px;
            }

            .item-img {
                width: 100%;
                height: 300px;
                background-image: url("../static/img_2/quiz_m.png");
            }


            .item-desc {
                width: 100%;
                /* margin-top: 20px;
                margin-bottom: 20px; */
            }

            .item-desc > h1 {
                padding-left: 10px;
            }

            .item-desc .category {

            }

            .item-desc>p {
                padding: 20px;
                font-size: 35px;
            }

            .item-btn {
                width: 100%;
                cursor: pointer;
            }

            .btn-order {
                margin: 20px;
                width: 150px;
                height: 150px;
                display: inline;
                font-size: 150px;
                text-align: center;
                padding-left: 0px;
            }

            .btn-order>span {
                width: 112px;
                height: 50px;
                line-height: 50px;
                display: block;
                text-align: center;
            }

            #modal .modal-window {

                width: 90%;
                height: 400px;
                padding: 0px;
            }
        }

        /* 미디어 쿼리 - 모바일 환경 끝 */
    </style>

    <script>
        /**
         * @author 김진회
         * 문제 순서 seq 는 첫번째 문제부터이므로 1로 초기화하여 시작
         * @date 21.08.23
         */
        let seq = 1;
        let countCorrect = 0;
        let quiz = '';
        let category = '';
        let correctAnswer = '';
        let description = '';
        let quizno = '';
        let temp_quiz = '';
        let temp_cate = '';
        let temp_check = '';
        let koQuizno = '';

        $(document).ready(function () {
            localStorage.clear();
            setQuiz();
        });

        /**
         * @brief 현재 순서에 맞게 퀴즈를 세팅합니다.(ajax)
         * @param {int} no 이번에 세팅해야할 퀴즈 번호
         * @returns {}
         * @author 김진회
         * @date 21.08.23
         */
        function setQuiz(no = 1) {
            $.ajax({
                dataType: "json",
                type: "POST",
                url: "/quiz",
                data: {
                    "seq": no,
                },
                success: function (response) {
                    // console.log(response.quiz);
                    quiz = response.quiz['content']
                    category = response.quiz['category']
                    correctAnswer = response.quiz['answer']
                    description = response.quiz['description']
                    quizno = response.quiz['no']
                    temp_quiz = `${quiz}`
                    temp_cate = `${category}`
                    $('#quiz').html(temp_quiz);
                    $('#category').html(temp_cate);
                    numberOfQuiz(quizno);
                }
            })
            //현재 풀고 있는 문제 번호를 +1해서 저장
            seq++;
        }

        /**
         * @brief 정답을 골랐을 때 맞았는지 틀렸는지와 설명을 띄우고, 점수 합산을 위해 이 정보를 저장합니다.
         * @param {string} selectedAnswer O를 골랐는지 X를 골랐는지에 대한 값
         * @returns {}
         * @author 김진회
         * @date 21.08.24
         */
        function selectAnswer(selectedAnswer) {
            if (seq > 10) {
                $('#btn-next').html("결과보러가기!");
            }
            if (selectedAnswer === correctAnswer) {
                countCorrect++;
                // 모달창에 정답입니다! 문구와 description을 넣어 띄우기
                temp_check = `정답입니다! <br/><br>`;
                $('#description').html(temp_check);
                modalOn()
            } else {
                // 모달창에 아쉽네요! 문구와 함께 descrirption을 넣어 띄우기
                temp_check = `아쉽지만 오답이에요! <br/><br>`;
                $('#description').html(temp_check);
                modalOn()
            }
        }

        /**
         * @brief 다음 문제 버튼 작동 => 다음 문제 세팅 또는 로컬스토리지에 맞춘 개수 저장하고 결과페이지로 보내기
         * @param {}
         * @returns {}
         * @author 김진회
         * @date 21.08.24
         */
        function next() {
            if (seq > 10) {
                // 10번 문제까지 풀었으면 seq가 11이 되었을 것, 그러면 몇 문제 맞췄는지를 저장하고 result페이지로 보내기
                localStorage.setItem('countCorrect', countCorrect);
                location.href = '/result';
            } else {
                setQuiz(seq);
                const modal = document.getElementById("modal")
                modal.style.display = "none"
            }
        }

        /**
         * @brief O 또는 X 클릭시 모달창 띄우는 함수
         * @param {}
         * @returns {}
         * @author 김진회
         * @date 21.08.24
         */
        function modalOn() {
            const modal = document.getElementById("modal")
            // const btnModal = document.getElementById("btn-modal")
            // btnModal.addEventListener("click", e => {
            modal.style.display = "flex"
            // })
            const temp_des = `${description}`
            $('#description').append(temp_des);
        }

        /**
         * @brief 지금 풀고 있는 퀴즈번호를 한글로 보여주기 (몇 번째)
         * @param {string} no 지금 세팅하는 퀴즈번호 
         * @returns {} 
         * @author 김진회
         * @date 21.08.27
         */
        function numberOfQuiz(no) {
            switch (no) {
                case "1":
                    koQuizno = '첫';
                    break;
                case "2":
                    koQuizno = '두';
                    break;
                case "3":
                    koQuizno = '세';
                    break;
                case "4":
                    koQuizno = '네';
                    break;
                case "5":
                    koQuizno = '다섯';
                    break;
                case "6":
                    koQuizno = '여섯';
                    break;
                case "7":
                    koQuizno = '일곱';
                    break;
                case "8":
                    koQuizno = '여덟';
                    break;
                case "9":
                    koQuizno = '아홉';
                    break;
                case "10":
                    koQuizno = '열';
                    break;
            }

            $('#number-of-quiz').html(koQuizno);
        }
    </script>

</head>

<body>
    <!--<div id="answer-check">-->
    <!--    Lorem ipsum, dolor sit amet consectetur adipisicing elit. Expedita dolore eveniet laborum repellat sit distinctio, ipsa rem dicta alias velit? Repellat doloribus mollitia dolorem-->
    <!--    voluptatum ex reiciendis aut in incidunt?-->
    <!--    <a class="modal_close_btn">닫기</a>-->
    <!--</div>-->
    <div class="wrap">
        <div class="item-img">
        </div>
        <div class="item-desc">
            <h1><span id="number-of-quiz">첫</span> 번째 문제! &nbsp; <span class="category" id="category">음식물 쓰레기</span>
            </h1>
            <p id="quiz">
                요리에 쓰이는 된장, 고추장은 음식물 쓰레기통으로 !
            </p>

        </div>
        <div class="item-btn">
            <button type="button" onclick="selectAnswer('O')" class="btn btn-primary btn-order"><span>O</span></button>
            <button type="button" onclick="selectAnswer('X')" class="btn btn-danger btn-order"><span>X</span></button>
        </div>



    </div>
    <!--    <div id="container">-->
    <!--        <h2>Lorem Ipsum</h2>-->
    <!--        <div id="lorem-ipsum"></div>-->
    <!--    </div>-->
    <div id="modal" class="modal-overlay">
        <div class="modal-window">
            <div class="title">
                <h2>정답은?</h2>
            </div>
            <!-- <div class="close-area">X</div> -->

            <div class="content" id="description">

            </div>
            <button type="button" onclick="next()" class="btn btn-success"><span id="btn-next">다음 문제로</span></button>
        </div>
    </div>

</body>

</html>